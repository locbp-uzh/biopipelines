# BioPipelines Configuration
# This file defines folder paths and default environments for pipeline execution
# Users can customize this file to match their local setup
#
# Placeholder syntax: <key> references another folder key
# Resolution order: base -> infrastructure -> shared_overrides (if shared) -> repositories -> cache -> derived -> server
# Runtime placeholders: <user>, <cwd>, <shared_user> are injected at runtime

# Folder Configuration
folders:
  # Base paths (resolved first)
  # Runtime placeholders: <username>, <cwd>
  # - <username>: actual username (e.g., gquarg)
  # - <cwd>: current working directory
  base:
    home: "/home/<username>"
    data: "<home>/data"
    scratch: "/scratch/<username>"
    group: "/shares/locbp.chem.uzh"
    user: "<group>/<username>"
    biopipelines: "<cwd>"
    biopipelines_output: "<user>/biopipelines_output"

  # Infrastructure paths
  infrastructure:
    HelpScripts: "<biopipelines>/HelpScripts"
    MMseqs2: "<biopipelines>/MMseqs2"
    PDBs: "<biopipelines>/PDBs"
    Ligands: "<biopipelines>/Ligands"
    models: "<group>/models"
    containers: "<group>/containers"

  # Installation files
  repositories:
    RFdiffusion: "<data>/RFdiffusion"
    RFdiffusionAllAtom: "<data>/rf_diffusion_all_atom"
    RFdiffusion3: "<data>/rfdiffusion3"
    ProteinMPNN: "<data>/ProteinMPNN"
    AlphaFold: "<data>/localcolabfold"
    OmegaFold: "<data>/OmegaFold"
    Boltz: "<data>/boltz"
    BoltzGen: "<data>/boltzgen"
    GhostFold: "<data>/ghostfold"
    ESMFold: "<data>/esmfold"
    DynamicBind: "<data>/DynamicBind"
    ModelForge: "<data>/modelforge"

  # Cache paths (shared on group storage)
  cache:
    BoltzCache: "<models>/Boltz"
    BoltzGenCache: "<models>/BoltzGen"
    ColabFoldDatabases: "<models>/colabfold_databases"

  # Server paths
  server:
    MMseqs2Server: "<biopipelines_output>/MMseqs2Server"
    MMseqs2LCFServer: "<biopipelines_output>/MMseqs2LCFServer"

# Default Environments
# Each tool can have a default conda environment specified here
# If no specific model is used, the default is biopipelines containing pyyaml and pandas (it is automatically created when submitting via submit)
# If the tool itsef manages the change to an environment (e.g. when it needs more than one environment), set it to null
environments:
  # Structure generation
  RFdiffusion: "ProteinEnv"
  RFdiffusionAllAtom: "ProteinEnv"
  RFdiffusion3: "foundry"
  BoltzGen: "boltzgen"
  BoltzGenMerge: "boltzgen"
  BoltzGenImport: "boltzgen"

  # Sequence design
  ProteinMPNN: "ProteinEnv"
  LigandMPNN: "ligandmpnn_env"
  MutationComposer: "MutationEnv"
  SDM: "MutationEnv"
  Fuse: "biopipelines"
  StitchSequences: "biopipelines"
  SplitChains: "biopipelines"
  DNAEncoder: "biopipelines"

  # Structure prediction
  AlphaFold: "biopipelines"
  GhostFold: "ghostfold"
  ESMFold: "esmfold"
  Boltz2: "Boltz2Env"
  RF3: "modelforge"
  OnionNet: "OnionNetEnv"
  OnionNet2: "OnionNet2Env"

  # Analysis 
  DynamicBind: "biopipelines"
  ResidueAtomDistance: "biopipelines"
  PLIP: "biopipelines"
  DistanceSelector: "biopipelines"
  ConformationalChange: "ProteinEnv"
  MutationProfiler: "MutationEnv"
  SequenceMetricCorrelation: "MutationEnv"
  BayesianAdjuster: "MutationEnv"
  SequenceMetricAnalysis: "MutationEnv"
  ProteinLigandContacts: "ProteinEnv"
  PoseDistance: "ProteinEnv"

  # Data management
  Filter: "biopipelines"
  Rank: "biopipelines"
  SelectBest: "biopipelines"
  RemoveDuplicates: "biopipelines"
  MergeTables: "biopipelines"
  ConcatenateTables: "biopipelines"
  SliceTable: "biopipelines"
  ExtractMetrics: "biopipelines"
  AverageByTable: "biopipelines"
  SelectinEditor: "ProteinEnv"

  # Utilities
  LoadOutput: "biopipelines"
  MMseqs2: "biopipelines"
  MMseqs2Server: "biopipelines"
  MMseqs2LCF: "biopipelines"
  MMseqs2ServerLCF: "biopipelines"
  CompoundLibrary: "biopipelines"
  PDB: "biopipelines"
  Ligand: "biopipelines"
  PyMOL: "ProteinEnv"
  Plot: "biopipelines"